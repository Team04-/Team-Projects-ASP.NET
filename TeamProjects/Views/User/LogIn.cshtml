@model TeamProjects.Models.DepartmentModel
@{
    ViewBag.Title = "LogIn";
}
@section Includes{
    <link href="@Url.Content("~/Content/chosen/chosen.min.css")" rel="stylesheet" />
    <script src="@Url.Content("~/Scripts/chosen.jquery.min.js")" type="text/javascript"></script>
}
<h2>Login</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Login failed. Check your login details.");
    <div>
        <fieldset>
            <legend>Login Form</legend>
            <div><label>Department</label></div>
            <select id="Code" class="departmentCode" name="Code" onchange="document.getElementById('Name').value=this.options[this.selectedIndex].getAttribute('data-name');" data-placeholder="Select your department...">
                <option disabled selected>Choose a department...</option>
                @{
                    for (int i = 0; i < ViewBag.DepartmentsInfo[0].Length;i++)
                    {
                        <option value="@ViewBag.DepartmentsInfo[1][i]" data-name="@ViewBag.DepartmentsInfo[0][i]">@ViewBag.DepartmentsInfo[1][i] - @ViewBag.DepartmentsInfo[0][i]</option>
                    }    
                }
            </select>
            <input type="hidden" id="Name" class="departmentName" name="Name"/>
            <div>@Html.LabelFor(u => u.Password)</div>
            <div>
                @Html.PasswordFor(u => u.Password)
                @Html.ValidationMessageFor(u => u.Password) 
            </div>
            <input type="submit" value="Log In"/>
        </fieldset>
    </div>
}
<script>
    $(".departmentCode").chosen({ width: "315px" });
</script>